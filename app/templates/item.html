{% extends "base.html" %}

{% block title %}{{ item.name }}{% endblock %}
{% block content %}
    <div class="grid-container">
    <div class="item">
        <h2>{{ item.name }}</h2>
        <p>
            Price: $
            <script type="text/javascript">
                formatPrice({{ item.price }});
            </script><br>
            Quantity: {{ item.quantity }}<br>
            Seller: {{ item.seller.username }}<br>
            Category: {{ item.category }}<br>
            In Stock: {{ item.is_for_sale }}<br>
            <p>
                Description:<br>
                <p>{{ item.description }}</p><br>
            </p>
        </p>
    </div>
    <div class="addtocart">
        <h2>Add to Cart</h2>
        <form action="" method="post" novalidate>
            {{ form.hidden_tag() }}
            <p>
                {{ form.item_quantity.label }}<br>
                {{ form.item_quantity }}<br>
                {% for error in form.item_quantity.errors %}
                <span style="color: red;">[{{ error }}]</span>
                {% endfor %}
            </p>
            <input type='submit' name='cart' value='Add to cart'>
        </form>
    </div>
    <div class="reviews">
        <h2>Reviews</h2>
    {% if reviews | length == 0 %}
    <h3>There are no reviews for this item</h3>
    {% else %}
    <table>
        <tr>
            <th>Reviewer</th>
            <th>Date</th>
            <th>Location</th>
            <th>Stars</th>
            <th>Content</th>
        </tr>
        {% for review in reviews %}
        <tr>
            <td>{{ review.User.username }}</td>
            <td>{{ review.Reviews.date_time }}</td>
            <td>{{ review.Reviews.location }}</td>
            <td>{{ review.Reviews.stars }}</td>
            <td>{{ review.Reviews.content }}</td>
        </tr>
        {% endfor %}
    </table>
    {% endif %}
        </table>
        <h2>Write a review</h2>
        <form action="" method="post" novalidate>
            {{ review_form.hidden_tag() }}
            <p>
                {{ review_form.location.label }}<br>
                {{ review_form.location(size=32) }}<br>
                {% for error in review_form.location.errors %}
                <span style="color: red;">[{{ error }}]</span>
                {% endfor %}
            </p>
            <p>
                {{ review_form.stars.label }}<br>
                {{ review_form.stars(size=32) }}<br>
                {% for error in review_form.stars.errors %}
                <span style="color: red;">[{{ error }}]</span>
                {% endfor %}
            </p>
            <p>
                {{ review_form.content.label }}<br>
                {{ review_form.content(size=32) }}<br>
                {% for error in review_form.content.errors %}
                <span style="color: red;">[{{ error }}]</span>
                {% endfor %}
            </p>
            <input type='submit' name='review' value='Add review'>
        </form>
    </div>
    </div>
{% endblock %}